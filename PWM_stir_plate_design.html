<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWM Coltrolled Stir Plate Design - Braukaiser</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="site-header">
        <div class="header-content">
            <a href="index.html" class="site-title">
                <h1>Braukaiser</h1>
                <span class="tagline">German Brewing and More</span>
            </a>
            <nav class="main-nav">
                <a href="index.html">Home</a>
                <a href="Recipes.html">Recipes</a>
                <a href="The_Science_of_Mashing.html">Science</a>
                <a href="Glossary_of_German_Brewing_Terms.html">Glossary</a>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <article class="wiki-content">
            <h1 class="page-title">PWM Coltrolled Stir Plate Design</h1>
            <div class="content-block"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div> <ul> <li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li> <li class="toclevel-1 tocsection-2"><a href="#Design_options"><span class="tocnumber">2</span> <span class="toctext">Design options</span></a></li> <li class="toclevel-1 tocsection-3"><a href="#PWM_design"><span class="tocnumber">3</span> <span class="toctext">PWM design</span></a> <ul> <li class="toclevel-2 tocsection-4"><a href="#Wiring_diagram_and_parts_list"><span class="tocnumber">3.1</span> <span class="toctext">Wiring diagram and parts list</span></a> <ul> <li class="toclevel-3 tocsection-5"><a href="#part_list"><span class="tocnumber">3.1.1</span> <span class="toctext">part list</span></a></li> </ul> </li> <li class="toclevel-2 tocsection-6"><a href="#Housing"><span class="tocnumber">3.2</span> <span class="toctext">Housing</span></a></li> <li class="toclevel-2 tocsection-7"><a href="#Testing_.26_troubleshooting"><span class="tocnumber">3.3</span> <span class="toctext">Testing &amp; troubleshooting</span></a></li> </ul> </li> </ul> </div> <h1><span class="mw-headline" id="Introduction">Introduction</span></h1> <p>A stir plate uses a pair of spinning magnets to move a magnetic stir bar contained inside a flask or other vessel. The spinning of the stir bar keeps the liquid, in our case a yeast starter, agitated which promotes gas exchange and keeps the yeast in suspension. The main advantage of such a set-up is the ease with which it can be sanitized. All surfaces that come in contact with the starter, flask and stir bar, can be sanitized through boiling. </p><p>Experiments and observations by home brewers, including my own, have shown that constantly agitated starters increase yeast growth by 2 to 4 times over non agitated starters. This is the main reason why home brewers are interested in building or acquiring stir plates. Given the fairly high price ($50 for a simple design and $100+ for most commercial models) many home brewers op for building their own. </p><p>Commercial labs often favor the use of orbital shaker tables which also keep yeast cultures agitated but have the capacity to hold many flasks at once. Building a shaker table is more complicated than a stir plate which is why they are not commonly used by home brewers. </p> <h1><span class="mw-headline" id="Design_options">Design options</span></h1> <p>Most home built stir plates use a DC fan to which strong magnets are attached. The main design difference lies in how the speed of that fan is controlled. Simple designs put a variable resistor between the DC power supply and the fan. Slightly more complex designs use a linear voltage controller to regulate the voltage applied to the fan. The problem with designs that control fan speed through voltage is that most fans have a narrow voltage band between no rotation and full speed. This makes speed control difficult unless there is sufficient resistance from the liquid that is stirred. </p><p>This speed control problem is overcome by pulse width modulation (PMW), which does not change the voltage applied to the fan but the amount of time the fan is turned on and off. The frequency of the pulsed fan power is generally between 10-100 Hz. A PWM based design is described by this article. </p><p>An even more sophisticated stir plate control uses a micro controller and speed sensor to implement a feedback loop that allows for accurate fan speed control based on a speed (RPM) set by the user. The Digital Stirplate offered by <a rel="nofollow" class="external text" href="http://www.digitalhomebrew.com/p/52/digital-stirplate">Digital Homebrew</a> employs such a design. </p> <h1><span class="mw-headline" id="PWM_design">PWM design</span></h1> <div class="thumb tright"><div class="thumbinner" style="width:352px;"><a href="images/555_internals.gif" class="image"><img alt="" src="images/555_internals.gif" width="350" height="224" class="thumbimage"/></a> <div class="thumbcaption">Figure 1 - the internals of the NE555N timer chip connected to a capacitor that can be charged and discharged through a variable resistor</div></div> <p>The fan speed control logic described here is based on a <a rel="nofollow" class="external text" href="http://www.homebrewtalk.com/f51/simple-pwm-stirplate-controller-219121/">Home Brew Talk post</a> by rocketman768 with a few modifications. It employs a <a rel="nofollow" class="external text" href="http://www.mouser.com/ds/2/389/CD00000479-103226.pdf">NE555N</a> timer chip. The internals of the NE555N are basically a RS flip flop with differential comparators its R (reset) and S (set) inputs as shown in figure 1. When the voltage at the THRES input exceeds the internally generated V<sub>thres</sub> the R input of the flip flop asserts high and the output is reset to 0. Conversely if the voltage at the TRIG input is lower than the internally created V<sub>trig</sub> the flip flop's S input asserts high and the output Q is asserted high. In this design TRIG and THRES are both connected to the same terminal of a capacitor and as a reslt R and S can never be asserted at the same time. </p><p>Pulses of differing witdth will be created by triggering the R and S inputs at changing time intervals through charging and discharging of the capcitor. The speed which which a capacitor charges depends on the product of its capacitance and the resistor though which it is charged, also called RC constant. Changing the capacitance of a capacitor is difficult but changing the resistance of a resistor is much easier, which why the capacitance remains constant but the resistance is changed. </p> <div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:502px;"><a href="images/PWM_detail.gif" class="image"><img alt="" src="images/PWM_detail.gif" width="500" height="438" class="thumbimage"/></a> <div class="thumbcaption">Figure 2 - Charging and discharging the capacitor causes the generation of pulses on the Q output. The width of these pulses depend on R1 and R2 which are based the current position of the potentiometer</div></div></div> <p>In this design the capacitor is connected to the output Q though variable paths of a potentiometer and diodes. Figure 2 illustrates how the capacitor is charged and discharged as a result of being connected to Q. When Q is asserted high, the cpacitor is charged through the R1 part of the potentiometer until the voltage on the capacitor reaches V<sub>thres</sub> at which point the R input of the flop is triggered and Q asserts low. Now the capacitor discharges through the R2 part of the potentiometer until the capacitor voltage falls below V<sub>trig</sub>, S is triggered and Q asserts high repeating the process of charging the capacitor. </p><p><br/> </p><p>The result is that the time of Q being asserted high deepends on the product of R1 and the capacitance C while the width of Q being asserted low depends on R2 and the capacitance C. Since R1 and R2 are part of a potentiometer they are adjustable but their sum has to remain constant. What follows is that changing R1 changes the percentage that Q is asserted high but not the frequency of pulses on Q. </p><p>To control the fan, Q is used to drive a MOSFET which turns the fan on and off. The longer Q is asserted high the longer the fan is turned on and thus the faster the fan will spin. The interia of the fan coulped with a sufficiently high pulse freqiency resuts in an even rotation speed despite the pulsed nature of fan's power supply. </p> <h2><span class="mw-headline" id="Wiring_diagram_and_parts_list">Wiring diagram and parts list</span></h2> <div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:684px;"><a href="images/StirPlatePWM_wiring.gif" class="image"><img alt="" src="images/StirPlatePWM_wiring.gif" width="682" height="406" class="thumbimage"/></a> <div class="thumbcaption">Figure 3 - Wiring diagram of the PWM control logic and the DC fan</div></div></div> <p>Figure 3 shows the complete schematic for the control logic and the fan. 555 is the timer chip. D1 and D2 control which section of the potentiometer P1 controls charging and discharging of C1, respectively. D3 is a diode that protects the MOSFET from voltage spikes that happen when the current through the inductive load, the fan, is suddenly interrupted. Capacitors C2 and C3 stabilize the input power supply. </p> <div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:766px;"><a href="images/StirPlatePWM_breadboard.gif" class="image"><img alt="" src="images/StirPlatePWM_breadboard.gif" width="764" height="608" class="thumbimage"/></a> <div class="thumbcaption">Figure 4 - suggested breadboard layout</div></div></div> <p>Figure 4 shows the suggested layout on a breadboard. A standard breaboard is large enough for 2 control circuits which is why the option for a 2nd control circuit is shown. Pins 2 and 6 of the 555 are connected with a piece of wire under the breadboard (red dashed line) while all other connections are made with wire jumpers on top of the board (blue lines). The layout also shows the connections within the bread board for reference (thin gray lines). (+) and (-) are the 12 V power supply connections, M+ and M- are the fan terminals and M,L,R refer to the middle, left and right terminals of the potentiometer. If the fan speeds up when the potentiometer is turned to the right, simply reverse the L and R connections. </p> <h3><span class="mw-headline" id="part_list">part list</span></h3> <p>The following is a part list including <a rel="nofollow" class="external text" href="http://mouser.com/">mouser.com</a> item numbers. The part numbers are given for reference and no guarantee is made for their correctness. </p> <table class="wikitable"> <th> id </th> <th> description </th> <th> mouser.com model item number </th> <div class="content-block">555</div> <div class="content-block">NE555N timer chip</div> <div class="content-block">511-NE555N</div> <div class="content-block">D1, D2, D3</div> <div class="content-block">general purpose diode</div> <div class="content-block">625-1N4933-E3</div> <div class="content-block">C1</div> <div class="content-block">Aluminum Electrolytic Capacitors, 2.2 uF</div> <div class="content-block">647-UVY2A2R2MDD</div> <div class="content-block">P1</div> <div class="content-block">100k linear potentiometer</div> <div class="content-block">858-P160KNP0C20B100K NOTE: I was not able to find a good knob for this potentiometer.</div> <div class="content-block">C2</div> <div class="content-block">Aluminum Electrolytic Capacitors, 22 uF</div> <div class="content-block">140-RGA220M2ABK0811G</div> <div class="content-block">C3</div> <div class="content-block">Multilayer Ceramic Capacitor, 0.1 uF</div> <div class="content-block">810-FK18X7R1E104K</div> <div class="content-block">Q1</div> <div class="content-block">MOSFET NFET DPAK 30V 54A 5.5 mOhm</div> <div class="content-block">863-NTD4906N-35G</div> <div class="content-block">M</div> <div class="content-block">12 V DC fan</div> <div class="content-block">670-OD8025-12HSS </div> <p>You'll also need a 12V DC power supply and a jack for connecting this power supply. </p> <h2><span class="mw-headline" id="Housing">Housing</span></h2> <p>Home brewers have been very creative when it comes to mounting the fan in a housing. As long as the top cover, which will be between the fan and the flask, any box will do. While some have even used Tupperware (R) containters they do not necissarily provide enough rigidy to support a 2 L or lager Erlenmeyer flask. I suggest using a sturdy pastic project box or custom build enclosure. The double stir plate shown here uses a simple housing fashioned from thick plywood and acryllic glass. Being able to see the spinning fan can be an advantage in some cases. </p> <div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:702px;"><a href="images/StirPlatePWM-1.jpg" class="image"><img alt="" src="images/StirPlatePWM-1.jpg" width="700" height="342" class="thumbimage"/></a> <div class="thumbcaption">Picture of the completed double stir plate. This design is 14 inches wide, 7 inches deep and 2.5 inches high.</div></div></div> <div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:702px;"><a href="images/StirPlatePWM-2.jpg" class="image"><img alt="StirPlatePWM-2.jpg" src="images/StirPlatePWM-2.jpg" width="700" height="422" class="thumbimage"/></a> <div class="thumbcaption"></div></div></div> <h2><span class="mw-headline" id="Testing_.26_troubleshooting">Testing &amp; troubleshooting</span></h2> <p>The more complicated the control the more chances there are for defects. While an oscilloscope would be very useful in debugging this circuit, a simple voltmeter will do as well. </p><p>Once completed apply the 12 V supply voltage. If nothing starts smoking see if turning the potentiometer changes the fan speed. If nothing happens check the supply voltage on the 555 (pin 8) and the reset pin (pin 4). They should both be at 12 V. The check that GND (pin 1) is at 0 volt. Now pin 3. If that's at 0 V the fan should be off and when it is at 12 V the fan should be running at full speed. Now check that both pins 6 and 2 have the same voltage as pin 3. If they don't check their connections through the potentiometer. </p> </div>   </div> 
        </article>
    </main>

    <footer class="site-footer">
        <div class="footer-content">
            <p>Originally published on <a href="http://braukaiser.com">braukaiser.com</a> by Kai Troester</p>
            <p>Archived and preserved for the brewing community</p>
        </div>
    </footer>
</body>
</html>